---
- hosts: all

  vars:
    ansible_python_interpreter: python3

  tasks:
    - name: Install Python SELinux dependencies.
      yum:
        name:
          - python3-libselinux
          - python3-policycoreutils
          - selinux-policy
          - selinux-policy-targeted
        state: present

    - name: Ensure SELinux is enabled in `targeted` mode.
      selinux:
        policy: targeted
        state: enforcing

# Security test.
- import_playbook: ../security/main.yml
  vars:
    ansible_python_interpreter: python3
